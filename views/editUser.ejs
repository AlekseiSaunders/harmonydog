<!DOCTYPE html>
<html class="h-100" lang="en">
  <head>
    <%- include('partials/head') %>
  </head>
  <body class="d-flex flex-column h-100">
    <header><%- include('partials/header') %></header>
    <main class="container">
      <h1>Update <%=user.firstName%> <%=user.lastName%>'s Profile</h1>
      <!-- adds informational banner if user is in demo account-->
      <%if(user.privileges === 'demo'){%>
      <p class="text-warning bg-dark px-5 py-2">
        Note: You are using a demo account so some functionality is disabled.
      </p>
      <%}%>
      <div class="row justify-content-center">
        <!-- query ?_method=PUT added to invoke methodOverride and allow updating from form button -->
        <form
          class="needs-validation col-10 col-md-6"
          action="/<%=user._id%>?_method=PUT"
          method="POST"
        >
          <!-- name and user name fields-->
          <h4>Name/UserName/Email:</h4>
          <div class="mb-3">
            <label for="firstName" class="form-label">First Name</label>
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              value="<%=user.firstName%>"
              required
            />
          </div>
          <div class="mb-3">
            <label for="lastName" class="form-label">Last Name</label>
            <input
              type="text"
              class="form-control"
              id="lastName"
              name="lastName"
              value="<%=user.lastName%>"
              required
            />
          </div>
          <div class="mb-3">
            <label for="userName" class="form-label">User Name</label>
            <input
              type="text"
              class="form-control"
              id="userName"
              name="userName"
              value="<%=user.userName%>"
            />
          </div>
          <div class="mb-3">
            <label for="userEmail" class="form-label">Email address</label>
            <input
              type="email"
              class="form-control"
              id="userEmail"
              aria-describedby="emailHelp"
              name="userEmail"
              value="<%=user.email%>"
              required
            />
          </div>
          <h4>Address:</h4>
          <div class="mb-3">
            <label for="addressStreet" class="form-label">Street Address</label>
            <input
              type="text"
              class="form-control"
              id="addressStreet"
              name="addressStreet"
              value="<%=user.addressStreet%>"
            />
          </div>
          <div class="mb-3">
            <label for="addressCity" class="form-label">City</label>
            <input
              type="text"
              class="form-control"
              id="addressCity"
              name="addressCity"
              value="<%=user.addressCity%>"
            />
          </div>
          <div class="mb-3">
            <label for="addressZip" class="form-label">Zip</label>
            <input
              type="text"
              class="form-control"
              id="addressZip"
              name="addressZip"
              value="<%=user.addressZip%>"
            />
          </div>
          <h4>Phone Number:</h4>
          <div class="">
            <label for="phone" class="form-label">Phone number</label>
            <input
              type="tel"
              class="form-control"
              id="phone"
              name="phone"
              pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
              value="<%=user.phone%>"
            />
          </div>
          <div id="emailHelp" class="form-text mb-3">
            Please use 123-456-7890 format.
          </div>
          <!-- disables submit button if user is in demo account-->
          <% if(user.privileges === 'demo') {%>
          <button type="submit" class="btn btn-primary mb-5" disabled>
            Submit
          </button>
          <%}else{%>
          <button type="submit" class="btn btn-primary mb-5">Submit</button>
          <%}%>
          <a class="btn btn-danger mb-5" href="/profile">Cancel</a>
        </form>
      </div>
    </main>
    <footer class="footer light-blue mt-auto py-3">
      <%- include('partials/footer') %>
    </footer>
    <%- include('partials/scripts') %>
  </body>
</html>
